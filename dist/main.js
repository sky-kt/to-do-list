(()=>{"use strict";var e={d:(t,n)=>{for(var d in n)e.o(n,d)&&!e.o(t,d)&&Object.defineProperty(t,d,{enumerable:!0,get:n[d]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{d:()=>l});let t=(()=>{let e=()=>{let e=document.getElementById("buttonContainer");t(e);let n=document.createElement("form");n.setAttribute("id","buttonForm");let d=document.createElement("input");d.setAttribute("id","buttonFormInput"),d.type="text",d.name="taskName",n.appendChild(d),e.appendChild(n),d.focus()},t=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)};return{makeButton:n=>{console.log(`input:${n}`),null!=n&&(console.log("can push"),(e=>{console.log(e),tasks.construct(e),tasks.load(),status.init()})(n));let d=document.getElementById("buttonContainer");t(d);let a=document.createElement("div"),l=document.createTextNode("+ New Task");a.appendChild(l),a.setAttribute("id","newTaskButton"),d.appendChild(a),a.addEventListener("click",e)},makeForm:e}})(),n=(()=>{let e=[],t=()=>{let e=(new Date).toLocaleDateString(),t=e.split("/"),n=t[0],d=t[1];return n=n.padStart(3,"0").slice(-2),d=d.padStart(3,"0").slice(-2),t[0]=t[2],t[1]=n,t[2]=d,e=t.join("-"),e},n=e=>{let t=document.getElementById("taskContainer");a(t);for(let n in e){let a=document.createElement("div");a.classList.add("task");let l=document.createElement("div");l.classList.add("taskStatus");let o=document.createElement("div");o.classList.add("notDone");let i=document.createElement("i");i.classList.add("far","fa-circle");let r=document.createElement("div");r.classList.add("taskTextContainer");let s=document.createElement("p");s.classList.add("taskText");let c=document.createTextNode(e[n][0]),u=document.createElement("form");u.classList.add("taskDate");let m=document.createElement("label");m.for="dueDate";let p=document.createElement("input");p.type="date",p.classList.add("dueDate"),p.name="dueDate",e[n][1]&&(p.value=e[n][1]),u.appendChild(m),u.appendChild(p),o.prepend(i),s.appendChild(c),r.appendChild(s),d(r),l.appendChild(o),l.appendChild(r),a.appendChild(l),a.appendChild(u),t.appendChild(a)}},d=t=>{let n=t.firstChild,l=n.textContent;n.addEventListener("click",(()=>{n.remove();let o=document.createElement("form");o.classList.add("newTextForm");let i=document.createElement("input");i.type="text",i.name="newTaskName",i.classList.add("newTextInput"),o.appendChild(i),t.appendChild(o),o.addEventListener("submit",(()=>{let n=t.parentNode.parentNode,l=Array.from(n.parentNode.children).indexOf(n);e[l].shift(),e[l].unshift(i.value),a(t);let o=document.createElement("p");o.classList.add("taskText");let r=document.createTextNode(i.value);o.appendChild(r),t.appendChild(o),d(t)})),o.addEventListener("focusout",(()=>{a(t);let e=document.createElement("p");e.classList.add("taskText");let n=document.createTextNode(l);e.appendChild(n),t.appendChild(e),d(t)})),i.focus()}))},a=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)};return{loadInbox:()=>{n(e)},loadToday:()=>{let d=[],a=t();for(let t in e)console.log("under"),e[t].length>1&&e[t][1]===a&&d.push(e[t]);console.log(d),n(d)},loadWeek:()=>{let t=[];for(let n in e)e[n][1]&&new Date(e[n][1]).getWeek()===(new Date).getWeek()&&(console.log("same week"),t.push(e[n]));n(t)},construct:n=>{"today"===l||"week"===l?e.push([n,t()]):e.push([n]),console.log("task array is",e)},taskArray:e}})(),d={init:()=>{document.querySelectorAll(".notDone").forEach((e=>{e.addEventListener("click",(()=>{(e=>{for(;e.firstChild;)e.removeChild(e.firstChild)})(e);let t=document.createElement("i");t.classList.add("fas","fa-check-circle"),e.prepend(t);let d=e.parentNode.parentNode;n.taskArray.splice(Array.from(d.parentNode.children).indexOf(d),1),d.classList.add("fadingTask"),setTimeout((()=>{taskContainer.removeChild(e.parentNode.parentNode)}),500)}))}))}},a=()=>{console.log("changes..."),document.querySelectorAll(".dueDate").forEach((e=>{e.addEventListener("change",(()=>{let t=e.value,d=e.parentNode.parentNode,a=n.taskArray[Array.from(d.parentNode.children).indexOf(d)];a.length>1&&a.pop(),a.push(t)}))}))},l="inbox";Date.prototype.getWeek=function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)};let o=()=>{document.getElementById("newTaskButton").addEventListener("click",(()=>{t.makeForm(),i()}))},i=()=>{let e=document.getElementById("buttonForm"),l=document.getElementById("buttonFormInput");e.addEventListener("submit",(()=>{let e=l.value;n.construct(e),r(),d.init(),a(),t.makeButton(),o()})),e.addEventListener("focusout",(()=>{t.makeButton(),o()}))},r=()=>{"inbox"===l?n.loadInbox():"today"===l?n.loadToday():"week"===l&&n.loadWeek()},s=e=>{document.getElementById("taskTabTitle").textContent=e},c=document.getElementById("inbox"),u=document.getElementById("today"),m=document.getElementById("week");c.addEventListener("click",(()=>{l="inbox",r(),d.init(),a(),s("Inbox")})),u.addEventListener("click",(()=>{l="today",r(),d.init(),a(),s("Today")})),m.addEventListener("click",(()=>{l="week",r(),d.init(),a(),s("This Week")})),t.makeButton(),o()})();