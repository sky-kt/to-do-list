(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{d:()=>l});let t=(()=>{let e=()=>{let e=document.getElementById("buttonContainer");t(e);let n=document.createElement("form");n.setAttribute("id","buttonForm");let a=document.createElement("input");a.setAttribute("id","buttonFormInput"),a.type="text",a.name="taskName",n.appendChild(a),e.appendChild(n),a.focus()},t=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)};return{makeButton:n=>{console.log(`input:${n}`),null!=n&&(console.log("can push"),(e=>{console.log(e),tasks.construct(e),tasks.load(),status.init()})(n));let a=document.getElementById("buttonContainer");t(a);let d=document.createElement("div"),l=document.createTextNode("+ New Task");d.appendChild(l),d.setAttribute("id","newTaskButton"),a.appendChild(d),d.addEventListener("click",e)},makeForm:e}})(),n=(()=>{let e=[],t=()=>{let e=(new Date).toLocaleDateString(),t=e.split("/"),n=t[0],a=t[1];return n=n.padStart(3,"0").slice(-2),a=a.padStart(3,"0").slice(-2),t[0]=t[2],t[1]=n,t[2]=a,e=t.join("-"),e},n=e=>{console.log(`tasksToLoad: ${l}`);let t=document.getElementById("taskContainer");d(t);for(let n in e){console.log(`tasksToLoad: ${l}`);let d=document.createElement("div");d.classList.add("task");let o=document.createElement("div");o.classList.add("taskStatus");let i=document.createElement("div");i.classList.add("notDone");let r=document.createElement("i");r.classList.add("far","fa-circle");let s=document.createElement("div");s.classList.add("taskTextContainer");let c=document.createElement("p");c.classList.add("taskText");let m=document.createTextNode(e[n][0]),u=document.createElement("form");u.classList.add("taskDate");let p=document.createElement("label");p.for="dueDate";let h=document.createElement("input");h.type="date",h.classList.add("dueDate"),h.name="dueDate",e[n][1]&&(h.value=e[n][1]),u.appendChild(p),u.appendChild(h),i.prepend(r),c.appendChild(m),s.appendChild(c),a(s),o.appendChild(i),o.appendChild(s),d.appendChild(o),d.appendChild(u),t.appendChild(d)}},a=e=>{let t=e.firstChild;t.addEventListener("click",(()=>{t.remove();let n=document.createElement("form");n.classList.add("newTextForm");let l=document.createElement("input");l.type="text",l.name="newTaskName",l.classList.add("newTextInput"),n.appendChild(l),n.addEventListener("submit",(()=>{d(e);let t=document.createElement("p");t.classList.add("taskText");let n=document.createTextNode(l.value);t.appendChild(n),e.appendChild(t),a(e)})),e.appendChild(n)}))},d=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)};return{loadInbox:()=>{n(e)},loadToday:()=>{let a=[],d=t();for(let t in e)console.log("under"),e[t].length>1&&e[t][1]===d&&a.push(e[t]);console.log(a),n(a)},loadWeek:()=>{let t=[];for(let n in e)e[n][1]&&new Date(e[n][1]).getWeek()===(new Date).getWeek()&&(console.log("same week"),t.push(e[n]));n(t)},construct:n=>{"today"===l?e.push([n,t()]):e.push([n]),console.log("task array is",e)},taskArray:e}})(),a={init:()=>{document.querySelectorAll(".notDone").forEach((e=>{e.addEventListener("click",(()=>{(e=>{for(;e.firstChild;)e.removeChild(e.firstChild)})(e);let t=document.createElement("i");t.classList.add("fas","fa-check-circle"),e.prepend(t);let a=e.parentNode.parentNode;n.taskArray.splice(Array.from(a.parentNode.children).indexOf(a),1),a.classList.add("fadingTask"),setTimeout((()=>{taskContainer.removeChild(e.parentNode.parentNode)}),500)}))}))}},d=()=>{console.log("changes..."),document.querySelectorAll(".dueDate").forEach((e=>{e.addEventListener("change",(()=>{let t=e.value,a=e.parentNode.parentNode,d=n.taskArray[Array.from(a.parentNode.children).indexOf(a)];d.length>1&&d.pop(),d.push(t)}))}))},l="inbox";Date.prototype.getWeek=function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)};let o=()=>{document.getElementById("newTaskButton").addEventListener("click",(()=>{t.makeForm(),i()}))},i=()=>{let e=document.getElementById("buttonForm"),l=document.getElementById("buttonFormInput");e.addEventListener("submit",(()=>{let e=l.value;n.construct(e),r(),a.init(),d(),t.makeButton(),o()}))},r=()=>{"inbox"===l?n.loadInbox():"today"===l?n.loadToday():"week"===l&&n.loadWeek()},s=e=>{document.getElementById("taskTabTitle").textContent=e},c=document.getElementById("inbox"),m=document.getElementById("today"),u=document.getElementById("week");c.addEventListener("click",(()=>{l="inbox",r(),a.init(),d(),s("Inbox")})),m.addEventListener("click",(()=>{l="today",r(),a.init(),d(),s("Today")})),u.addEventListener("click",(()=>{l="week",r(),a.init(),d(),s("This Week")})),t.makeButton(),o()})();